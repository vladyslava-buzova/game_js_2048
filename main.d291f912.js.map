{"version":3,"sources":["scripts/main.js"],"names":["document","addEventListener","gameField","querySelector","scores","resultMessageWin","resultMessageLose","messageStart","start","width","cells","score","generateNumber","randomNumber","Math","floor","random","length","innerHTML","lose","zeros","i","waysRow","waysColumn","classList","add","remove","removeEventListener","moveArrow","moveRight","one","two","three","four","filteredRowNum","Number","filter","num","newRow","Array","fill","concat","moveLeft","filteredNum","moveDown","filteredColumnNum","newColumn","moveUp","combineRows","combinedTotal","win","combineColumn","e","code","addClassColor","className","createField","cell","createElement","appendChild","push","contains"],"mappings":"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","file":"main.d291f912.js","sourceRoot":"../src","sourcesContent":["'use strict';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const gameField = document.querySelector('.game-field');\n  const scores = document.querySelector('.game-score');\n  const resultMessageWin = document.querySelector('.message-win');\n  const resultMessageLose = document.querySelector('.message-lose');\n  const messageStart = document.querySelector('.message-start');\n  const start = document.querySelector('.start');\n  const width = 4;\n  const cells = [];\n  let score = 0;\n\n  function createField() {\n    for (let i = 0; i < width * width; i++) {\n      const cell = document.createElement('div');\n\n      cell.classList.add('field-cell');\n\n      cell.innerHTML = 0;\n      gameField.appendChild(cell);\n      cells.push(cell);\n    }\n  }\n  createField();\n\n  // click Start button\n  start.addEventListener('click', () => {\n    document.addEventListener('keyup', moveArrow);\n    score = 0;\n    scores.innerHTML = score;\n    messageStart.classList.add('hidden');\n    start.innerHTML = 'Restart';\n    start.classList.add('restart');\n\n    for (let i = 0; i < cells.length; i++) {\n      cells[i].innerHTML = 0;\n\n      resultMessageWin.classList.add('hidden');\n      resultMessageLose.classList.add('hidden');\n    }\n\n    if (start.classList.contains('restart-lose')) {\n      start.classList.remove('restart-lose');\n      start.classList.add('restart');\n    }\n\n    generateNumber();\n    addClassColor();\n    generateNumber();\n    addClassColor();\n  });\n\n  // function generateNumber() {\n  //   const randomNumber = Math.floor(Math.random() * cells.length);\n\n  //   if (cells[randomNumber].innerHTML == 0) {\n  //     cells[randomNumber].innerHTML = 2;\n  //     lose();\n  //   }\n  // }\n\n  // function addNumber() {\n  //   generateNumber();\n  //     if (!waysRow() || !waysColumn()) {\n  //       return;\n  //     }\n\n  // }\n\n  // generate a number randomly\n  function generateNumber() {\n    const randomNumber = Math.floor(Math.random() * cells.length);\n\n    if (cells[randomNumber].innerHTML == 0) {\n      cells[randomNumber].innerHTML = 2;\n      lose();\n    } else {\n      // if (!waysRow() && !waysColumn()) {\n      //   return;\n      // }\n\n      generateNumber();\n    }\n  }\n\n  // swipe right\n  function moveRight() {\n    for (let i = 0; i < cells.length; i++) {\n      if (i % 4 === 0) {\n        const one = cells[i].innerHTML;\n        const two = cells[i + 1].innerHTML;\n        const three = cells[i + 2].innerHTML;\n        const four = cells[i + 3].innerHTML;\n\n        const row = [Number(one), Number(two), Number(three), Number(four)];\n\n        const filteredRowNum = row.filter(num => num !== 0);\n\n        const zeros = Array(4 - filteredRowNum.length).fill(0);\n        const newRow = zeros.concat(filteredRowNum);\n\n        cells[i].innerHTML = newRow[0];\n        cells[i + 1].innerHTML = newRow[1];\n        cells[i + 2].innerHTML = newRow[2];\n        cells[i + 3].innerHTML = newRow[3];\n      }\n    }\n  }\n\n  // swipe left\n  function moveLeft() {\n    for (let i = 0; i < 16; i++) {\n      if (i % 4 === 0) {\n        const one = cells[i].innerHTML;\n        const two = cells[i + 1].innerHTML;\n        const three = cells[i + 2].innerHTML;\n        const four = cells[i + 3].innerHTML;\n\n        const row = [Number(one), Number(two), Number(three), Number(four)];\n\n        const filteredNum = row.filter(num => num !== 0);\n\n        const zeros = Array(4 - filteredNum.length).fill(0);\n        const newRow = filteredNum.concat(zeros);\n\n        cells[i].innerHTML = newRow[0];\n        cells[i + 1].innerHTML = newRow[1];\n        cells[i + 2].innerHTML = newRow[2];\n        cells[i + 3].innerHTML = newRow[3];\n      }\n    }\n  }\n\n  // swipe down\n  function moveDown() {\n    for (let i = 0; i < 4; i++) {\n      const one = cells[i].innerHTML;\n      const two = cells[i + width].innerHTML;\n      const three = cells[i + width * 2].innerHTML;\n      const four = cells[i + width * 3].innerHTML;\n\n      const column = [Number(one), Number(two), Number(three), Number(four)];\n\n      const filteredColumnNum = column.filter(num => num !== 0);\n\n      const zeros = Array(4 - filteredColumnNum.length).fill(0);\n\n      const newColumn = zeros.concat(filteredColumnNum);\n\n      cells[i].innerHTML = newColumn[0];\n      cells[i + width].innerHTML = newColumn[1];\n      cells[i + width * 2].innerHTML = newColumn[2];\n      cells[i + width * 3].innerHTML = newColumn[3];\n    }\n  }\n\n  // swipe up\n  function moveUp() {\n    for (let i = 0; i < 4; i++) {\n      const one = cells[i].innerHTML;\n      const two = cells[i + width].innerHTML;\n      const three = cells[i + width * 2].innerHTML;\n      const four = cells[i + width * 3].innerHTML;\n\n      const column = [Number(one), Number(two), Number(three), Number(four)];\n\n      const filteredColumnNum = column.filter(num => num !== 0);\n\n      const zeros = Array(4 - filteredColumnNum.length).fill(0);\n\n      const newColumn = filteredColumnNum.concat(zeros);\n\n      cells[i].innerHTML = newColumn[0];\n      cells[i + width].innerHTML = newColumn[1];\n      cells[i + width * 2].innerHTML = newColumn[2];\n      cells[i + width * 3].innerHTML = newColumn[3];\n    }\n  }\n\n  function combineRows() {\n    for (let i = 0; i < 15; i++) {\n      if (cells[i].innerHTML === cells[i + 1].innerHTML) {\n        const combinedTotal\n         = Number(cells[i].innerHTML) + Number(cells[i + 1].innerHTML);\n\n        cells[i + 1].innerHTML = 0;\n        cells[i].innerHTML = combinedTotal;\n        score += combinedTotal;\n        scores.innerHTML = score;\n      }\n    }\n    win();\n  }\n\n  function combineColumn() {\n    for (let i = 0; i < 12; i++) {\n      if (cells[i].innerHTML === cells[i + width].innerHTML) {\n        const combinedTotal\n         = Number(cells[i].innerHTML) + Number(cells[i + width].innerHTML);\n\n        cells[i].innerHTML = combinedTotal;\n        cells[i + width].innerHTML = 0;\n        score += combinedTotal;\n        scores.innerHTML = score;\n      }\n    }\n    win();\n  }\n\n  function moveArrow(e) {\n    if (e.code === 'ArrowRight') {\n      moveRight();\n      // generateNumber();\n      combineRows();\n      addClassColor();\n      moveRight();\n      addClassColor();\n      generateNumber();\n      addClassColor();\n    } else if (e.code === 'ArrowLeft') {\n      moveLeft();\n      //  generateNumber();\n      combineRows();\n      addClassColor();\n      moveLeft();\n      addClassColor();\n      generateNumber();\n      addClassColor();\n    } else if (e.code === 'ArrowDown') {\n      moveDown();\n      //  generateNumber();\n      combineColumn();\n      addClassColor();\n      moveDown();\n      addClassColor();\n      generateNumber();\n      addClassColor();\n    } else if (e.code === 'ArrowUp') {\n      moveUp();\n      //  generateNumber();\n      combineColumn();\n      addClassColor();\n      moveUp();\n      addClassColor();\n      generateNumber();\n      addClassColor();\n    }\n  }\n\n  function win() {\n    for (let i = 0; i < cells.length; i++) {\n      if (cells[i].innerHTML == 2048) {\n        messageStart.classList.add('hidden');\n        resultMessageWin.classList.remove('hidden');\n        document.removeEventListener('keyup', moveArrow);\n      }\n    }\n  }\n\n  function waysRow() {\n    for (let i = 0; i < cells.length - 1; i++) {\n      if (cells[i].innerHTML === cells[i + 1].innerHTML) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  function waysColumn() {\n    for (let i = 0; i < 12; i++) {\n      if (cells[i].innerHTML === cells[i + width].innerHTML) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n  // no zeros on the field - game is over\n  function lose() {\n    let zeros = 0;\n\n    for (let i = 0; i < cells.length; i++) {\n      if (cells[i].innerHTML == 0) {\n        zeros++;\n      }\n    }\n\n    if (zeros === 0 && !waysRow() && !waysColumn()) {\n      messageStart.classList.add('hidden');\n      resultMessageLose.classList.remove('hidden');\n      start.classList.remove('restart');\n      start.classList.add('restart-lose');\n      document.removeEventListener('keyup', moveArrow);\n    }\n  }\n\n  function addClassColor() {\n    for (let i = 0; i < cells.length; i++) {\n      if (cells[i].innerHTML == 0) {\n        cells[i].className = '';\n        cells[i].classList.add('field-cell');\n      } else if (cells[i].innerHTML == 2) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--2`, 'field-cell');\n      } else if (cells[i].innerHTML == 4) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--4`, 'field-cell');\n      } else if (cells[i].innerHTML == 8) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--8`, 'field-cell');\n      } else if (cells[i].innerHTML == 16) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--16`, 'field-cell');\n      } else if (cells[i].innerHTML == 32) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--32`, 'field-cell');\n      } else if (cells[i].innerHTML == 64) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--64`, 'field-cell');\n      } else if (cells[i].innerHTML == 128) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--128`, 'field-cell');\n      } else if (cells[i].innerHTML == 256) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--256`, 'field-cell');\n      } else if (cells[i].innerHTML == 512) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--512`, 'field-cell');\n      } else if (cells[i].innerHTML == 1024) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--1024`, 'field-cell');\n      } else if (cells[i].innerHTML == 2048) {\n        cells[i].className = '';\n        cells[i].classList.add(`field-cell--2048`, 'field-cell');\n      }\n    }\n  }\n});\n"]}